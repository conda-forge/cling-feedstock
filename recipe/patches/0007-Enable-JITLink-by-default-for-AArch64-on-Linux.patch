From 64fb0b22ec7d6296ec0437653582f7afa996d5f6 Mon Sep 17 00:00:00 2001
From: Jonas Hahnfeld <jonas.hahnfeld@cern.ch>
Date: Mon, 9 Sep 2024 14:09:13 +0200
Subject: [PATCH 7/7] Enable JITLink by default for AArch64 on Linux

There are still failures with RuntimeDyld on AArch64 which seem to
be solved with JITLink, so make the switch now.
---
 lib/Interpreter/IncrementalJIT.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/lib/Interpreter/IncrementalJIT.cpp b/lib/Interpreter/IncrementalJIT.cpp
index 7aef0dde..436c3f00 100644
--- a/lib/Interpreter/IncrementalJIT.cpp
+++ b/lib/Interpreter/IncrementalJIT.cpp
@@ -355,7 +355,8 @@ static bool UseJITLink(const Triple& TT) {
   if (TT.getArch() == Triple::riscv64 ||
       (TT.isOSBinFormatMachO() &&
        (TT.getArch() == Triple::aarch64 || TT.getArch() == Triple::x86_64)) ||
-      (TT.isOSBinFormatELF() && TT.getArch() == Triple::ppc64le)) {
+      (TT.isOSBinFormatELF() &&
+       (TT.getArch() == Triple::aarch64 || TT.getArch() == Triple::ppc64le))) {
     jitLink = true;
   }
   // Finally, honor the user's choice by setting an environment variable.
